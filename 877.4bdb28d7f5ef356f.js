"use strict";(self.webpackChunkmy_weather_app=self.webpackChunkmy_weather_app||[]).push([[877],{2877:(T,l,s)=>{s.r(l),s.d(l,{ForecastWeatherModule:()=>A});var n=s(6814),d=s(1243),e=s(4946),i=s(5619),p=s(4716),u=s(4664),g=s(9397),m=s(6076),v=s(1809);const h="lastForecast";let S=(()=>{class t{get forecastWeather$(){return this.forecastWeatherSubject.asObservable()}get isLoading$(){return this.isLoadingSubject.asObservable()}get isError$(){return this.isErrorSubject.asObservable()}constructor(a,r){this.weatherService=a,this.positionService=r,this.forecastWeatherSubject=new i.X(void 0),this.isLoadingSubject=new i.X(!1),this.isErrorSubject=new i.X(!1)}getForecastWeather(){const a=localStorage.getItem(h);if(a){const r=JSON.parse(a);if(r.date===(new Date).toDateString())return void this.forecastWeatherSubject.next(r.forecast)}this.isLoadingSubject.next(!0),this.isErrorSubject.next(!1),this.positionService.getPosition().pipe((0,p.x)(()=>this.isLoadingSubject.next(!1)),(0,u.w)(r=>this.weatherService.getForecastWeather(r.latitude,r.longitude)),(0,g.b)(this.saveLastForecastDate)).subscribe(r=>{this.forecastWeatherSubject.next(r)},()=>{this.isErrorSubject.next(!0)})}saveLastForecastDate(a){const r={forecast:a,date:(new Date).toDateString()};localStorage.setItem(h,JSON.stringify(r))}static#e=this.\u0275fac=function(r){return new(r||t)(e.LFG(m.u),e.LFG(v.e))};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var w=s(8338);let x=(()=>{class t{constructor(){this.weatherSelected=new e.vpe}onWeatherSelected(){this.weatherSelected.emit(this.weather)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-forecast-card"]],inputs:{weather:"weather",isSelectedCard:"isSelectedCard"},outputs:{weatherSelected:"weatherSelected"},decls:13,vars:9,consts:[[1,"forecast-card","d-flex","p-2",3,"click"],[1,"d-flex","flex-column"],[1,"d-flex","flex-column","align-items-end"]],template:function(r,c){1&r&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return c.onWeatherSelected()}),e.TgZ(1,"div",1)(2,"span"),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"span")(6,"b"),e._uU(7),e.qZA()()(),e.TgZ(8,"div",2)(9,"span"),e._uU(10),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()()()),2&r&&(e.ekj("forecast-card--selected",c.isSelectedCard),e.xp6(3),e.Oqu(e.xi3(4,6,c.weather.date,"MMMM d")),e.xp6(4),e.hij("",c.weather.temp,"\xbaC"),e.xp6(3),e.hij("",c.weather.temp_min,"\xbaC"),e.xp6(2),e.hij("",c.weather.temp_max,"\xbaC"))},dependencies:[n.uU],styles:[".forecast-card[_ngcontent-%COMP%]{border:1px solid #28688C;background-color:#2e7fa1;border-radius:5px;color:#fff;gap:16px;cursor:pointer}.forecast-card--selected[_ngcontent-%COMP%]{opacity:.8}"]})}return t})();function F(t,o){if(1&t){const a=e.EpF();e.ynx(0),e.TgZ(1,"app-forecast-card",7),e.NdJ("weatherSelected",function(c){e.CHM(a);const f=e.oxw(2);return e.KtG(f.onWeatherSelected(c))}),e.qZA(),e.BQk()}if(2&t){const a=o.$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("weather",a)("isSelectedCard",r.weatherSelected===a)}}function C(t,o){if(1&t&&e._UZ(0,"app-weather-card",8),2&t){const a=e.oxw(2);e.Q6J("weather",a.weatherSelected)}}function W(t,o){if(1&t&&(e.TgZ(0,"div",3)(1,"div",4),e.YNc(2,F,2,2,"ng-container",5),e.ALo(3,"slice"),e.qZA(),e.YNc(4,C,1,1,"app-weather-card",6),e.qZA()),2&t){const a=o.ngIf,r=e.oxw();e.xp6(2),e.Q6J("ngForOf",e.Dn7(3,2,a,0,4)),e.xp6(2),e.Q6J("ngIf",r.weatherSelected)}}function y(t,o){1&t&&(e.TgZ(0,"div",9)(1,"div",10)(2,"span",11),e._uU(3,"Loading..."),e.qZA()()())}function _(t,o){1&t&&(e.TgZ(0,"div",12),e._uU(1," There is an error\n"),e.qZA())}const j=[{path:"",component:(()=>{class t{constructor(a){this.forecastWeatherService=a}get isLoading$(){return this.forecastWeatherService.isLoading$}get isError$(){return this.forecastWeatherService.isError$}get forecastList$(){return this.forecastWeatherService.forecastWeather$}ngOnInit(){this.getForecastData()}getForecastData(){this.forecastWeatherService.getForecastWeather()}onWeatherSelected(a){this.weatherSelected=a}static#e=this.\u0275fac=function(r){return new(r||t)(e.Y36(S))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-forecast-weather"]],decls:6,vars:9,consts:[["class","d-flex align-items-center flex-column forecast-weather",4,"ngIf"],["class","d-flex justify-content-center mt-5",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],[1,"d-flex","align-items-center","flex-column","forecast-weather"],[1,"d-grid","m-4","forecast-weather__container"],[4,"ngFor","ngForOf"],["class","my-5 w-100 d-flex justify-content-center",3,"weather",4,"ngIf"],[3,"weather","isSelectedCard","weatherSelected"],[1,"my-5","w-100","d-flex","justify-content-center",3,"weather"],[1,"d-flex","justify-content-center","mt-5"],["role","status",1,"spinner-border"],[1,"visually-hidden"],["role","alert",1,"alert","alert-danger"]],template:function(r,c){1&r&&(e.YNc(0,W,5,6,"div",0),e.ALo(1,"async"),e.YNc(2,y,4,0,"div",1),e.ALo(3,"async"),e.YNc(4,_,2,0,"div",2),e.ALo(5,"async")),2&r&&(e.Q6J("ngIf",e.lcZ(1,3,c.forecastList$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,5,c.isLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,7,c.isError$)))},dependencies:[n.sg,n.O5,w.X,x,n.Ov,n.OU],styles:[".forecast-weather__container[_ngcontent-%COMP%]{gap:8px;grid-template-columns:repeat(4,1fr)}@media (width <= 720px){.forecast-weather__container[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})}return t})()}];let L=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.oAB({type:t});static#r=this.\u0275inj=e.cJS({imports:[d.Bz.forChild(j),d.Bz]})}return t})();var Z=s(6208);let A=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=e.oAB({type:t});static#r=this.\u0275inj=e.cJS({imports:[n.ez,L,Z.m]})}return t})()}}]);