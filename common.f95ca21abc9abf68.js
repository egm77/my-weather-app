"use strict";(self.webpackChunkmy_weather_app=self.webpackChunkmy_weather_app||[]).push([[592],{6076:(g,h,o)=>{o.d(h,{u:()=>O});var t=o(7398),l=o(2096),_=o(9397);function i(e){return new Date(1e3*e)}function x(e){return{name:e.name,description:e.weather[0].description,icon:s(e.weather[0].icon),temp_max:Math.round(e.main.temp_max),temp:Math.round(e.main.temp),temp_min:Math.round(e.main.temp_min),feels_like:Math.round(e.main.feels_like),date:i(e.dt)}}function s(e){return`https://openweathermap.org/img/wn/${e}@2x.png`}function n(e){const p=function f(e){const p=new Map;return e.forEach(a=>{const c=i(a.dt).toDateString();c!==(new Date).toDateString()&&(p.has(c)||p.set(c,[]),p.get(c)?.push(a))}),Array.from(p.values())}(e.list);return function d(e,p){return e.map(a=>({date:i(a[0].dt),name:p,temp_min:Math.round(a.reduce((r,c)=>r.main.temp_min<c.main.temp_min?r:c).main.temp_min),temp_max:Math.round(a.reduce((r,c)=>r.main.temp_max>c.main.temp_max?r:c).main.temp_max),temp:Math.round(a.reduce(function(r,c){return r+c.main.temp},0)/a.length)}))}(p,e.city.name)}var u=o(4946);const m="https://api.openweathermap.org",w="43c4c3a6b374fd7f70a1de7257bf9afe";var E=o(9862);let D=(()=>{class e{constructor(a){this.httpClient=a}getCurrentWeather(a,r){return this.httpClient.get(((e,p)=>`${m}/data/2.5/weather?lat=${e}&lon=${p}&appid=${w}&units=metric`)(a,r))}getForecastWeather(a,r){return this.httpClient.get(((e,p)=>`${m}/data/2.5/forecast?lat=${e}&lon=${p}&appid=${w}&units=metric`)(a,r))}static#t=this.\u0275fac=function(r){return new(r||e)(u.LFG(E.eN))};static#e=this.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const v="lastForecast";let O=(()=>{class e{constructor(a){this.weatherHttpService=a}getCurrentWeather(a,r){return this.weatherHttpService.getCurrentWeather(a,r).pipe((0,t.U)(x))}getForecastWeather(a,r){const c=localStorage.getItem(v);if(c){const C=JSON.parse(c);if(C.date===(new Date).toDateString())return(0,l.of)(C.forecast)}return this.weatherHttpService.getForecastWeather(a,r).pipe((0,t.U)(n),(0,_.b)(this.saveLastForecastDate))}saveLastForecastDate(a){const r={forecast:a,date:(new Date).toDateString()};localStorage.setItem(v,JSON.stringify(r))}static#t=this.\u0275fac=function(r){return new(r||e)(u.LFG(D))};static#e=this.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()},1809:(g,h,o)=>{o.d(h,{e:()=>_});var t=o(5592),l=o(4946);let _=(()=>{class i{getPosition(){return new t.y(s=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(n=>{s.next({latitude:n.coords.latitude,longitude:n.coords.longitude}),s.complete()},()=>{s.error(),s.complete()}):(s.error(),s.complete())})}static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},8338:(g,h,o)=>{o.d(h,{X:()=>s});var t=o(4946),l=o(6814);function _(n,f){if(1&n&&t._UZ(0,"img",11),2&n){const d=t.oxw();t.Q6J("alt",d.weather.description)("src",d.weather.icon,t.LSH)}}function i(n,f){if(1&n&&(t.TgZ(0,"div",12)(1,"span"),t._uU(2),t.qZA()()),2&n){const d=t.oxw();t.xp6(2),t.Oqu(d.weather.description)}}function x(n,f){if(1&n&&(t.TgZ(0,"div")(1,"span"),t._uU(2,"Feels like: "),t.TgZ(3,"b"),t._uU(4),t.qZA()()()),2&n){const d=t.oxw();t.xp6(4),t.hij("",d.weather.feels_like,"\xb0")}}let s=(()=>{class n{static#t=this.\u0275fac=function(u){return new(u||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-weather-card"]],inputs:{weather:"weather"},decls:27,vars:11,consts:[[1,"weather-card","p-3","d-flex","w-100","flex-column","flex-sm-row","mx-3","mx-md-0"],[1,"weather-card__panel"],[1,"weather-card__location"],[1,"weather-card__date","my-2"],[1,"weather-card__panel","d-flex","flex-column","justify-content-center"],[1,"d-flex","align-items-center","flex-wrap","justify-content-center"],[3,"alt","src",4,"ngIf"],[1,"weather-card__mainTemperature"],["class","text-center text-capitalize mt-2",4,"ngIf"],[1,"weather-card__panel","align-self-center","align-items-center","align-items-sm-end","d-flex","flex-column"],[4,"ngIf"],[3,"alt","src"],[1,"text-center","text-capitalize","mt-2"]],template:function(u,m){1&u&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"span",2),t._uU(4),t.qZA()(),t.TgZ(5,"div",3)(6,"span"),t._uU(7),t.ALo(8,"date"),t.qZA()()(),t.TgZ(9,"div",4)(10,"div",5),t.YNc(11,_,1,2,"img",6),t.TgZ(12,"span",7),t._uU(13),t.qZA()(),t.YNc(14,i,3,1,"div",8),t.qZA(),t.TgZ(15,"div",9),t.YNc(16,x,5,1,"div",10),t.TgZ(17,"div")(18,"span"),t._uU(19,"High: "),t.TgZ(20,"b"),t._uU(21),t.qZA()()(),t.TgZ(22,"div")(23,"span"),t._uU(24,"Low: "),t.TgZ(25,"b"),t._uU(26),t.qZA()()()()()),2&u&&(t.xp6(4),t.hij(" ",m.weather.name," "),t.xp6(3),t.hij(" ",t.xi3(8,8,m.weather.date,"EEEE, MMMM d"),""),t.xp6(4),t.Q6J("ngIf",m.weather.icon),t.xp6(2),t.hij("",m.weather.temp,"\xb0C"),t.xp6(1),t.Q6J("ngIf",m.weather.description),t.xp6(2),t.Q6J("ngIf",m.weather.feels_like),t.xp6(5),t.hij("",m.weather.temp_max,"\xb0"),t.xp6(5),t.hij("",m.weather.temp_min,"\xb0"))},dependencies:[l.O5,l.uU],styles:[".weather-card[_ngcontent-%COMP%]{background-color:#28688c;box-shadow:1px 5px 25px 3px #444;border-radius:10px;max-width:720px;color:#fff;gap:8px}.weather-card__panel[_ngcontent-%COMP%]{flex:1}.weather-card__mainTemperature[_ngcontent-%COMP%]{font-size:48px;line-height:.7;font-weight:700}.weather-card__location[_ngcontent-%COMP%]{font-size:24px;line-height:normal}.weather-card__date[_ngcontent-%COMP%]{font-size:16px}"]})}return n})()},6208:(g,h,o)=>{o.d(h,{m:()=>_});var t=o(6814),l=o(4946);let _=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=l.oAB({type:i});static#a=this.\u0275inj=l.cJS({imports:[t.ez]})}return i})()}}]);